/**
 * Class v0.1 JavaScript OOP Library
 * 
 * @name    Class.js
 * @version 0.1
 * @author  FuFan
 * @date    2016/05/04
 * 
 * 页面引入标签：
 * <script src="Class.js"                       // 主文件
 *         mode="develop"                       // 配置运行模式:开发模式(develop)|工作模式(operate)
 *         compiler="Class.ECMAScript6Compiler" // 配置编译器类名,提供ECMAScript6类语法支持,若无需新语法（ES6）时,可以不配置
 *         home=""                              // 配置Class.js的home目录位置,缺省为Class.js所在的目录
 *         classpath="Fan=res/lib/fan_v1.3;"    // 配置非Class命名空间下类检索目录, 也可针对指定的起始命名空间单独配置: 
 *                                              // 如:classpath="lib/class_0.1;Fan=lib/fan_v1.3", 多个配置以分号分割,缺少前缀时视为其他所有前缀
 *         charset="utf-8"
 *         type="text/javascript">
 * </script>
 * 
 * 压缩方式：YUICompressor + UglifyJs
 */
(function(a,b){function bH(a,b,c,d,e,f){this.name="InvalidCallingEvalError",by.apply(this,arguments)}function bG(a,b,c,d,e,f){this.name="InvalidCallingError",by.apply(this,arguments)}function bF(a,b,c,d,e,f){this.name="RuntimeError",by.apply(this,arguments)}function bE(a,b,c,d,e,f){this.name="InvokeError",by.apply(this,arguments)}function bD(a,b,c,d,e,f){this.name="CompilerError",by.apply(this,arguments)}function bC(a,b,c,d,e,f){this.name="ClassInitError",by.apply(this,arguments)}function bB(a,b,c,d,e,f){this.name="ClassFileParseError",by.apply(this,arguments)}function bA(a,b,c,d,e,f){this.name="ClassFileNotFindError",by.apply(this,arguments)}function bz(a,b,c,d,e,f){this.name="ClassFileLoadingError",by.apply(this,arguments)}function by(a,b,c,d,e,f){var g=new Error,h=g.stack.split(/\n/).slice(2).join("\n").trim();if(!d&&!e&&!f&&h){var i=h.match(/(?:at |@)[^\n]+?(?:\/classes\/([^\n]+?)\.class):(\d+):?(\d+)?[^\d]*\n/)||[];b=i[1]||b,d=i[2]>>0,e=i[3]>>0}this.message=a||"",this.description=this.message,this.columnNumber=e>>0,this.lineNumber=d>>0,this.number=this.lineNumber,this.fileName=b||"",this.stack=h||this.stack||"",this.errMsg=this.message,this.errClassName=this.fileName,this.errMethodName=c?c+"(...)":"",this.errLine=this.lineNumber,this.errColumn=this.columnNumber,this.errCode=f||"",v(["%c ","错误类型: "+this.name,"错误信息: "+this.errMsg,"错误文件: "+this.errClassName+(this.errMethodName?"."+this.errMethodName:""),"错误位置: "+this.errLine+" 行 "+this.errColumn+" 列","错误代码: "+this.errCode,"堆栈信息:\n"+this.stack].join("\n"),"color:red")}function bx(a,b,c){var d=c||"",e=0,f=0,g="",h=a.stack.match(/(?:at |@)[^\n]+?(?:\/classes\/([^\n]+?)\.class):(\d+):?(\d+)?[^\d]*\n/)||[];d=d||h[1];var i=P[d];i?(a.lineNumber=h[2]>>0,a.columnNumber=h[3]>>0,g=i.toSource()):a.columnNumber+=1,e=a.lineNumber,f=a.columnNumber,g=b||g||"";var j=g.split(/\n/)[e-1];j=j?j.substring(0,f-1)+">>> "+j.substring(f-1,f)+" <<<"+j.substring(f):"";if(arguments.callee.caller.caller===F)return new bH("执行 eval 异常:"+a,d,"",a.lineNumber,a.columnNumber,j);return new bF("运行时异常:"+a,d,"",a.lineNumber,a.columnNumber,j)}function bw(a){var b=a,c,d,e=[];while(b instanceof Object&&!(b instanceof Function)&&b[U]){e.push(b.getClass().className),d=b[U](),c=d[S],d[S]=null,d[R]=null,b[T](null,null);for(var f in b){if(null==f)continue;null!=d[f]&&(d[f]=null),b[f]=null,delete b[f]}b.__proto__=null,delete b.__proto__,b=c,c=d=null}u("%c[对象销毁] "+e.join(" >> ")+" >> Object","color:darkgrey"),e=b=null}function bv(a,b){var c=[];a=a.replace(bt,function(a,b,d,e,f,g,h,i){c.push(f);if(/^Interface$/.test(d))return a;var j=(f||"").split(".").slice(-1)[0];bs[2]="this."+j+"=this."+j+"||function(){Super();};";var k=a+bs.join("");bs[2]=null;return k});var d="classes/"+(c.length>0?c.join("&"):b);c.length>1&&(d=d.length>80?d.substring(0,80)+"..":d),d+=".class";var e=Y.getCompiler(),f=e.replaceNotes(a,function(a){return a.replace(/[^\n]+/g,"")});f=e.replaceString(f,function(a,b,c){return a.charAt(0)+a.charAt(0)}),f=e.replaceRegExp(f,function(a){return a.replace(/[^\n]+/g,"")}),e=null;var g=[/,(?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*[)}\]]/g,/;(?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*[)\]]/g];x(g,function(a){f.replace(g[a],function(a,b){var c=f.substring(0,b+1);c=c.split(/\n/);var e=c.last()+"<<<<error>>>>"+f.substring(b+1).split(/\n/).first();v("%c[不规范语法文件]:"+d+":"+c.length+"\n"+e,"color:red");return""})}),bu.push(a);var h;try{h=F(a,d),Z.fire("ClassLoaded",[b,h])}finally{bu.pop()}return h}function br(a,b,c,d){a=k(a);if(P[a]){--d.count<=0&&b&&b();return!0}var e=Y.getFullClassPath(a),f=M[e];if(f instanceof Function)v("[加载类文件] - 来自预加载: "+a),M[e]=null,delete M[e],f(Z),--d.count<=0&&b&&b();else{if(bo(a)){Z.on("ClassLoaded",function(c){a==c&&--d.count<=0&&b&&b()});return!0}Q.push(a),bm(a),bp(a,function(c){bn(a),Z.fire("ClassFileLoaded",[a,c]),Y.getCompiler().build(c,function(b){Z.fire("ClassFileBuilded",[a,b]),bv(b,a)},function(b){var c=b[0],d=b[1],e=b[2],f=b[3];throw new bD("类文件编译异常:"+e,a,"",c,d,f)});if(!P[a])throw new bB("类文件载入异常",a);--d.count<=0&&b&&b()},function(){bn(a);throw 404==this.status?new bA("找不到类文件错误",a):new bz("类文件载入异常",a)},c)}}function bq(a,b){var c;switch(!0){case typeof a=="string":c=k(a).split(",");if(c.length===1&&P[c[0]]){b&&b();return}break;case a instanceof Array:c=a;break;default:return}if(!!c&&c.length!=0){var d={count:c.length};for(var e=0,f=c.length;e<f;++e)br(c[e],b,!1,d)}}function bp(a,b,c,d){var e=Y.getFullClassPath(a)+".js";u("%cLoading Class File:%c "+e,"color:blue","color:#444"),I.loadFile(e,function(a){b&&b.call(this,a)},function(){c&&c.call(this)},{async:d,mimeType:"text/javascript",headers:{accept:"text/javascript"}})}function bo(a){return bl[a]}function bn(a){delete bl[a]}function bm(a){bl[a]=1}function bk(a){var b=[];for(var c,d,e=0,f=a.length;e<f;++e){c=a[e],d=typeof c=="string"?P[c]:c;if(Z.isInterface(d))b.push(d);else throw new bC('The "'+c+'" is not a interface.')}return b}function bj(a,b){function c(){var a=c.caller,b=a[W],d=c[S];if(!b)throw new bE("Super(...)调用异常, 请勿在非成员方法中调用Super(...)",c.getClass().className);while(d){a=d[b];if(a instanceof Function&&(d.hasOwnProperty(b)||d.getClass()==Z.Object))return a.apply(c[R],arguments);if(!(d=d[U]))break;d=d(),d=d[S]}throw new bE('找不到方法:"'+b+'"',c.getClass().className)}c[R]=a,c[S]=b;for(var d in b)if(d){var e=b[d];e instanceof Function&&(e=e.bind(a)),c[d]=e}return c}function bi(a,b){return{thisObject:a,currObject:b}}function bh(){var a=this.thisObject,b=this.currObject,c=b.getClass().superclass,d=null;if(c===Object)d={};else{var e=c[V];d=new e;var f=bh.bind(bi(a,d));d[T](f,a),f=null;var g=d[c.constructorName];delete d[c.constructorName];for(var h in d)if(h&&d.hasOwnProperty(h)){var i=d[h];i instanceof Function&&(i[W]=h),h&&!a.hasOwnProperty(h)&&(a[h]=i)}b[T](bj(a,d),a),g.apply(a,arguments)}}function bg(b){if(!b)return a;var c=b.split(/\.+/),d=a;for(var e=0,f=c.length;e<f;e++)d[c[e]]||(d[c[e]]=new bf),d=d[c[e]];return d}function bf(){}function be(a,b){function c(){}if(!b||b.length==0)return!0;c[X]=a[X];var d=new(c||0);try{var e=a;while(e&&e!==Object)e[V].call(d),e=e.superclass}catch(f){throw new bC("检测接口实现异常:"+f.message,a.className)}for(var g=0,h,i,j=b.length;g<j;g++){h=b[g],i={},h.call(i);for(var k in i)if(i.hasOwnProperty(k)&&i[k]===Function){var l=d[k];if(!(k in d)||l===Function||!(l instanceof Function))throw new bC('类 "'+a.className+'" 未实现接口方法:'+h.interfaceName+"."+k,a.className)}}return!0}function bd(a,b){bb(b,bc);var c={};b.call(c);for(var d in c)d&&c.hasOwnProperty(d)&&c[d]!==Function&&(b[d]=c[d]);b.interfaceName=a,b.toString=$("[interface "+a+"]"),b.toSource=$(bu.last()),P[a]=b;var e=a.substring(a.lastIndexOf(".")+1),f=bg(a.substring(0,a.lastIndexOf(".")));f[e]=b}function bc(){if(this instanceof bc)throw new bE("不能用接口创建实例","BaseInterface")}function bb(a,b){function c(){}c[X]=b[X],a[X]=new(c||c),a[X].constructor=a,a["superclass"]=b}function ba(a,b){function c(){if(this instanceof arguments.callee||this===_){var c=new a;for(var d in c){var e=c[d];d&&c.hasOwnProperty(d)&&e instanceof Function&&(e[W]=d)}var f=c[b];delete c[b],c[T](bh.bind(bi(c,c,{})),c),f.apply(c,arguments);return c}return a.apply(this,arguments)}c.instance=function(){return c.apply(_,arguments)};return c}function $(a){return function(){return a}}function Z(a,b,c,d){var e=arguments.length,f;switch(e){case 0:case 1:throw new bC('类 "'+a+'" 创建异常, 参数列表错误.',a);case 2:d=b,b=c=null;break;case 3:d=c,typeof b=="string"?f=b=="Object"?Object:P[b]:f=b,Z.isClass(f)||f===Object?(b=f,c=null):(b instanceof Array?c=bk(b):c=f?[f]:null,b=null),f=null;break;case 4:typeof b=="string"?f=b=="Object"?Object:P[b]:f=b,Z.isClass(f)||f===Object?(b=f,f=[].concat(c),c=bk(f)):(f=[b,c],c=bk(f),b=null),f=null;break;default:var g=[];typeof b=="string"?f=b=="Object"?Object:P[b]:f=b,Z.isClass(f)||f===Object?b=f:Z.isInterface(b)&&(g.push(b),b=null);for(var h=2,i=arguments.length-1;h<i;++h)g.push(arguments[h]);d=arguments[e-1],c=bk(g),g=f=null}b=b||Z.Object||Object;var j=a.substring(a.lastIndexOf(".")+1),k=ba(d,j);bb(d,b[V]||Object),k[V]=d,k.className=a,k.superclass=b,k.constructorName=j,k.toString=$("[class "+a+"]"),k.getInterfaces=$(c||[]),k.toSource=$(bu.last()),k[X]=d[X],k[X].constructor=k,k[X].getClass=$(k),be(k,c),P[a]=k;var l=bg(a.substring(0,a.lastIndexOf(".")));l[j]=k;return k}function F(b,c){var d=c||"gEval/"+(new Date).getTime();return function(){if(t.chrome)return D||(D=new Error("Gets the error line number in this file"))?a.eval(null!=d?b+g+d:b):null;try{return D||(D=new Error("Gets the error line number in this file"))?a.eval(null!=d?b+g+d:b):null}catch(e){var f=(c||"").replace(/\bclasses\/|\.class$/g,"");bx(e,b,f)}}()}function E(){D||F("0");if(D._evalLine>=0)return D._evalLine;if(D.lineNumber>0)return D._evalLine=D.lineNumber;if(D.stack){var a=(D.stack+"").match(/:(\d+)(:\d+)?/)[1]>>0;return D._evalLine=a}return D._evalLine=0}function C(a,b,c){var d=arguments.length-1,e=arguments[d];typeof c=="boolean"?d--:e=!0;var f=arguments[1],g=1;while(f&&g<=d){for(var h in f)h!=null&&(e||!(h in a))&&(a[h]=f[h]);f=arguments[++g]}return a}function B(a,b,c){if(4===a.readyState){a.onreadystatechange=t.ie<7?s:null;var d=a.status;d>=200&&d<300||d===304||d===0||d===1223?b&&b.call(a,a.responseText||a.responseXML||""):c&&c.call(a,a)}}function z(){return{_es:{},_len:0,get:function(a){return this._es[a]?this._es[a].value:null},put:function(a,b){var c=this.get(a);this.has(a)?this._es[a].value=b:(this._es[a]={key:a,value:b,toString:function(){return"{"+this.key+":"+this.value+"}"}},this._len++);return c},has:function(a){return a in this._es&&this._es.hasOwnProperty(a)},remove:function(a){var b=null;this.has(a)&&(b=this._es[a].value,delete this._es[a]&&this._len--);return b},clear:function(a){if(a)for(var b in this._es)delete this._es[b];this._es={},this._len=0},size:function(){return this._len},each:function(a,c){var d=b;for(var e in this._es){d=a.call(c||this._es[e],e,this._es[e].value,this._es);if(d!==b)return d}return d},getKeySet:function(){var a=[];this.each(function(b){a.push(this.key)});return a},destroy:function(){this._es=this._len=this.clear=this.destroy=this.each=null,this.get=this.getKeySet=this.has=this.put=this.remove=this.size=null,u("[destroy] map object")}}}function x(a,c,d){var e,f=0,g,h;if(a instanceof Array||typeof a.length=="number")for(g=a.length;f<g&&(e=c.call(d||a[f],f,a))===b;++f);else for(h in a)if((e=c.call(d||a[h],h,a))!==b)break;return e}function w(a){if(null==a)return!0;for(var b in a)if(b&&a.hasOwnProperty(b))return!1;return!0}function v(b){var c=a.console;if(c){var d=new Date,e=["%c",d.getFullYear(),"-",d.getMonth()+1,"-",d.getDate()," ",d.getHours(),":",d.getMinutes(),":",d.getSeconds(),".",d.getMilliseconds(),"::%c "].join("");if(t.ie){b=(e+b).replace(/%(?:c|s|d|i|f|o|O)/g,""),c.log&&c.log(b);return}var f=[e+b,"color:yellowgreen","color:lightslategray"].concat(Array.prototype.slice.call(arguments,1));c.log?c.log.apply(c,f):c.info?c.info.apply(c,f):c.debug&&c.debug.apply(c,f)}}function u(a){Y.getMode()=="develop"&&v.apply(this,arguments)}function s(){}var c=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,d=/^[\s\uFEFF\xA0]+/g,e=/[\s\uFEFF\xA0]+$/g,f=/[\s\uFEFF\xA0]+/g,g="\r\n\n// Dynamic Loading \n//@ sourceURL="+location.protocol+"//"+location.hostname+(location.port?":"+location.port+"/":"/"),h=1;Function.prototype.bind instanceof Function||(Function.prototype.bind=function(a){var b=this;return function(){return b.apply(a,arguments)}});var j=String.prototype.trim&&!String.prototype.trim.call("??"),k=function(a){return(a+"").replace(f,"")},l=j&&String.prototype.trim||function(){return this.replace(c,"")},m=j&&String.prototype.trimLeft||function(){return this.replace(d,"")},n=j&&String.prototype.trimRight||function(){return this.replace(e,"")},o=function(){return this[this.length-1]},p=function(){return this[0]},q=function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},r=function(a){for(var b=this.length-1;b>=0;b--)if(this[b]===a)return b;return-1};(!j||!String.prototype.trim)&&(String.prototype.trim=l),(!j||!String.prototype.trimLeft)&&(String.prototype.trimLeft=m),(!j||!String.prototype.trimRight)&&(String.prototype.trimRight=n),Array.prototype.last||Object.defineProperty(Array.prototype,"last",{value:o,writable:!1,enumerable:!1,configurable:!1}),Array.prototype.first||Object.defineProperty(Array.prototype,"first",{value:p,writable:!1,enumerable:!1,configurable:!1}),Array.prototype.indexOf||Object.defineProperty(Array.prototype,"indexOf",{value:q,writable:!1,enumerable:!1,configurable:!1}),Array.prototype.lastIndexOf||Object.defineProperty(Array.prototype,"lastIndexOf",{value:r,writable:!1,enumerable:!1,configurable:!1});var t={};t[function(a){return t.browserName=a.match(/\bchrome\/([\d.]+)/)?"chrome":a.match(/\bfirefox\/([\d.]+)/)?"firefox":a.match(/\bmsie ([\d.]+)/)?"ie":a.match(/\btrident\b.* rv:([\d.]+)/)?"ie":a.match(/\bopera\/([\d.]+)/)?"opera":a.match(/\bversion\/([\d.]+).*safari/)?"safari":"unknow"}(a.navigator.userAgent.toLowerCase())]=t.browserVersion=RegExp.$1,t.ie&&(t.ieDocMode=document.documentMode||t.ie);var y=function(){var a,b;try{a=new XMLHttpRequest,b=function(){return new XMLHttpRequest}}catch(d){try{a=new ActiveXObject("Microsoft.XMLHTTP"),b=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(d){try{a=new ActiveXObject("Msxml2.XMLHTTP"),b=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(d){v("%c不能创建 XMLHttpRequest 对象","color:red")}}}b&&(y=b),b=null;try{return a}finally{a=null}};y();var A=function(){var a=document.createElement(t.ie?"img":"script");a.setAttribute("src","/");var b=a.src.replace(/[\/]+$/,"");a.src="";return function(c){if("/"==c)return b;try{a.setAttribute("src",c||"./");return a.src.replace(/[\/]+$/,"")}finally{a.src=""}}}(),D,G=z(),H={getEventMap:function(){return G},on:function(a,b,c){c=c||Z.id("event-");var d=G.get(a);d?d.put(c,b):(d=z(),d.put(c,b),G.put(a,d));return c},un:function(a,b){if(!!G.size()){if(arguments.length<=1){G.remove(a);return}var c=G.get(a);if(!c||!c.size())return;c.remove(b),!c.size()&&G.remove(a)}},fire:function(a,b){var c=G.get(a);if(c&&c.size()){var d=arguments.length;b=b instanceof Array?b:d>1?b&&b.callee&&b.length!=null?b:[b]:[],d=null;return c.each(function(a,c,d){if(typeof c=="function"){var e=c.apply(this,b||[]);if(!1===e)return e}},this)}a=b=c=null}},I={loadFile:function(a,b,c,d){var e=y();d=C({charset:"utf-8",async:!1,method:"GET",params:null,headers:null,mimeType:"text/xml",crossDomain:!1},d);var f=null==d.params?null:d.params;if(typeof f=="object"&&!w(f)){var g=[];x(f,function(a){null!=f[a]&&g.push(encodeURIComponent(a)+"="+encodeURIComponent(f[a]))}),f=g.join("&")}f&&/^GET$/i.test(d.method)&&(a+=/\?/.test(a)?"&"+f:"?"+f),d.username?e.open(d.method,a,!!d.async,d.username,d.password):e.open(d.method,a,!!d.async),d.mimeType&&e.overrideMimeType&&e.overrideMimeType(d.mimeType),d.crossDomain||(!d.headers&&(d.headers={}),d.headers["X-Requested-With"]="XMLHttpRequest"),/^POST|PUT$/i.test(d.method)&&e.setRequestHeader("CONTENT-TYPE","application/x-www-form-urlencoded;charset="+d.charset);if(d.headers)for(var h in d.headers)h&&e.setRequestHeader(h,d.headers[h]);d.async&&(e.onreadystatechange=function(){B(e,b,c)}),e.send(!/^GET$/i.test(d.method)&&null!=f?f:null),d.async||B(e,b,c)},loadScript:function(a,b,c,d){d=C({charset:"utf-8",defer:!1,async:!1,type:"text/javascript",parent:null},d);var e=document.createElement("script");e.type=d.type,d.id&&(e.id=d.id),e.charset=d.charset,d.defer&&(e.defer=!0),d.async&&(e.async=!0),c instanceof Function&&(e.onerror=c),b instanceof Function&&("addEventListener"in e?e.onload=b:"readyState"in e?e.onreadystatechange=function(){var a=this.readyState;if("loaded"==a||"complete"==a)e.onerror=e.onload=e.onreadystatechange=null,e=d=c=null,b(),b=null}:e.onload=b),a&&(e.src=a),(d.parent||document.getElementsByTagName("head")[0]).appendChild(e);return e},execScript:function(a,b){if(!!a.trim()){var c={charset:b||"utf-8"},d=this.loadScript(null,null,null,c);switch(this.execScript.__flag){case 1:d.appendChild(document.createTextNode(a));break;case 2:d.text=a;break;default:try{d.appendChild(document.createTextNode(a)),this.execScript.__flag=1}catch(e){d.text=a,this.execScript.__flag=2}}return d}}},J=null,K="operate",L="",M={},N={},O="*",P={},Q=[],R=".THIS.",S=".SUPER.",T=".SET.SUPER.",U="getSuper",V=".CLASS.BODY.",W=".METHOD.NAME.",X="prototype",Y={init:function(){C(Q,{toString:function(){var a=[];x(this,function(){var b=this;a.push("/"+Y.getFullClassPath(b)+".js")});return a.join(",\n")}});var a=document.getElementsByTagName("script");x(a,function(a){if(/\bClass(?:[-.]min)?\.js\s*$/.test(this.src)){L=(this.getAttribute("home")||"").trim().replace(/\/+$/,""),L=L?L+"/":null,L||(L=this.getAttribute("src").replace(/\bClass(?:[-.]min)?\.js\s*$/,"")||"./"),K=/^develop$/i.test((this.getAttribute("mode")||"").trim())?"develop":"operate";var b=(this.getAttribute("compiler")||"").trim();if(b){var c=Z.instance(b);Y.setCompiler(c)}var d=(this.getAttribute("classpath")||"").trim().split(/;+/);for(var e in d){var f=d[e],g=f.split(/=/),h=g[0].trim();if(g.length>1){var i=g.slice(1).join("=").trim().replace(/\/+$/,"");N[h]=i?i+"/":""}else if(h){var i=h.replace(/\/+$/,"");N[O]=i?i+"/":""}}return!1}}),a=null},getRoot:function(){return L},getHome:function(){return L},getMode:function(){return K},getClassPath:function(){return N},getCompiler:function(){if(J)return J;Z.JavascriptCompiler?J=new Z.JavascriptCompiler:J=new Z.Compiler;return J},setCompiler:function(a){a instanceof Z.Compiler?(J=a,u("%c编译器 "+a.getClass().className+" 装载成功!","color:blue;")):a&&u("编译器设置不正确, 编译器必须是 Class.Compiler 对象或其派生对象")},getInnerSpace:function(){return P},getLoadingFile:function(){var a=[];for(var b in bl)b&&bl.hasOwnProperty(b)&&a.push(b);return a},getUsingFileNameList:function(){return Q},addClassPackMap:function(a){C(M,a),v("[载入打包类文件] - 成功")},loadClassPack:function(a,b,c,d){v("[载入打包类文件] - "+a),b=b!==!1,I.loadFile(a,function(e){b?setTimeout(function(){bv(e,"class-pack")},0):bv(e,"class-pack"),c&&c(),c=d=e=a=b=null},d,{headers:{accept:"text/javascript"},async:b})},getFullClassPath:function(a){var b,c=a.split("."),d=N[c[0]];/Class|Fan/.test(c[0])?(b=c.slice(1).join("/"),typeof d!="string"&&(d=Y.getHome()+"src/")):(b=c.join("/"),typeof d!="string"&&(d=N[O]||""));return d+b}},_={},bl={},bs=["/* [system embedded code] */","var Super=null,This=null;",null,'this["'+T+'"]=function(s,t){Super=s;This=t;};','this["'+U+'"]=function(b){return b?Super["'+S+'"]:Super;};',"/* [system embedded code] */"],bt=/((?:^|[,;\(\){}=]|(?:\*[\/])|(?:\/\/[^\n]*\n))\s*(Class|Interface)(?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*\((?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*(['"])([a-zA-Z0-9._$]+)\3(?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*(?:,(?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*[a-zA-Z0-9._$]+(?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*)*?,(?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*function(?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*\((?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*\)(?:\s|\/\*[\s\S]*?\*\/|\/\/[^\n]*\n)*{)/g,bu=[];bb(by,Error),bb(bz,by),bb(bA,by),bb(bB,by),bb(bC,by),bb(bD,by),bb(bE,by),bb(bF,by),bb(bG,by),bb(bH,by),a.Class=Z,a.Import=bq,a.Interface=bd,a.Package=bg,Z.noop=s,Z.Extends=bb,Z.checkImplements=be,Z.isClass=function(a){return!!(a instanceof Function&&a.superclass&&a[V])},Z.isPackage=function(a){return a instanceof bf},Z.isInterface=function(a){return!!a&&a.superclass===bc},Z.forName=function(a){if(Z.isClass(a))return a;var b=P[a];b||bq(a),b=P[a];return b},Z.instance=function(a,b){var c,d=Z.forName(a);if(d){var e=Array.prototype.slice.call(arguments,1);c=d.instance.apply(d,e)}return c||null},C(Z,Y),C(Z,t),Z.THIS=R,Z.SUPER=S,Z.SET_SUPER=T,Z.GET_SUPER=U,Z.Exception=by,Z.ClassFileLoadingError=bz,Z.ClassFileNotFindError=bA,Z.ClassFileParseError=bB,Z.ClassInitError=bC,Z.CompilerError=bD,Z.InvokeError=bE,Z.RuntimeError=bF,Z.InvalidCallingError=bG,Z.InvalidCallingEvalError=bH,Z.printError=bx,Z.Loader=I,Z.parseClass=bv,Z.xhr=y,Z.map=z,Z.log=u,Z.apply=C,Z.each=x,Z.gEval=F,Z.getAbsPath=A,Z.id=function(a){return(a||"")+""+h++},Z.on=function(a,b,c){return H.on.apply(H,arguments)},Z.un=function(a,b){return H.un.apply(H,arguments)},Z.fire=function(a,b){return H.fire.apply(H,arguments)},Z("Class.Object",function(){var a=null,b=null;this["Object"]=function(){a()},this[T]=function(c,d){a=c,b=d},this[U]=function(b){return b?a[S]:a}}),Z.Object.prototype.toString=function(){return"[object "+this.getClass().className+"]"},Z.Object.prototype.destroy=function(){setTimeout(function(){bw(this)}.bind(this),0)},Z("Class.Compiler",function(){var a=null,b=null;this["Compiler"]=function(){a()},this[T]=function(c,d){a=c,b=d},this[U]=function(b){return b?a[S]:a}}),Z.Compiler.prototype.processKeyword=function(a,b,c){},Z.Compiler.prototype.processIdentifier=function(a,b,c,d){},Z.Compiler.prototype.processFunction=function(a,b,c){},Z.Compiler.prototype.insertCodeAtIndex=function(a,b,c,d){},Z.Compiler.prototype.build=function(a,b,c,d){b&&b(a);return a},Z.Compiler.prototype.replaceNotes=function(a,b){return a.replace(/(\/\*[\s\S]*?\*\/|\/\/[^\n]*(?:\n|$))*/g,b)},Z.Compiler.prototype.replaceString=function(a,b){return a.replace(/('[^']*'|"[^"]*")/g,b)},Z.Compiler.prototype.replaceRegExp=function(a,b){return a.replace(/(\/[^\/]+\/)*/g,b)},Y.init(),typeof define=="function"&&define.amd&&define.amd.Class&&define("Class",[],function(){return Z})})(window);